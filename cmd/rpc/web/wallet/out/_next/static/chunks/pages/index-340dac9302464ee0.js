(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5322)}])},5322:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eB}});var r=n(5893),a=n(3353),s=n(5264),o=n(6159),i=n(5886),l=n(8748),d=n(2280),c=n(9209),u=n(2854);function p(e,t,n){let r=null,a=n&&n.address?n.net_address:"",s=n&&n.address?n.output:"",o=null!=t?t.address:"",i=n&&n.address?n.committees.join(","):"";o="send"!==e&&n&&n.address?n.address:o,o="stake"===e&&n&&n.address?"WARNING: validator already staked":o,("edit-stake"===e||"stake"===e)&&(r=n&&n.address?n.staked_amount:null);let l={privateKey:{placeholder:"opt: private key hex to import",defaultValue:"",tooltip:"the raw private key to import if blank - will generate a new key",label:"private_key",inputText:"key",feedback:"please choose a private key to import",required:!1,type:"password",minLength:64,maxLength:128},address:{placeholder:"id of the node",defaultValue:o,tooltip:"required: the sender of the transaction",label:"sender",inputText:"address",feedback:"please choose an address to send the transaction from",required:!0,type:"text",minLength:40,maxLength:40},committees:{placeholder:"1, 22, 50",defaultValue:i,tooltip:"Required: Comma-separated list of committee chain IDs to stake for",label:"committees",inputText:"committees",feedback:"please input atleast 1 committee",required:!0,type:"text",minLength:1,maxLength:200},netAddr:{placeholder:"url of the node",defaultValue:a,tooltip:"required: the url of the validator for consensus and polling",label:"net_address",inputText:"net-addr",feedback:"please choose a net address for the validator",required:!0,type:"text",minLength:5,maxLength:50},rec:{placeholder:"recipient of the tx",defaultValue:"",tooltip:"required: the recipient of the transaction",label:"recipient",inputText:"recipient",feedback:"please choose a recipient for the transaction",required:!0,type:"text",minLength:40,maxLength:40},amount:{placeholder:"amount value for the tx",defaultValue:r,tooltip:"required: the amount of currency being sent / sold",label:"amount",inputText:"amount",feedback:"please choose an amount for the tx",required:!0,type:"number",minLength:1,maxLength:100},receiveAmount:{placeholder:"amount of counter asset to receive",defaultValue:r,tooltip:"required: the amount of counter asset being received",label:"receiveAmount",inputText:"rec-amount",feedback:"please choose a receive amount for the tx",required:!0,type:"number",minLength:1,maxLength:100},orderId:{placeholder:"the id of the existing order",tooltip:"required: the unique identifier of the order",label:"orderId",inputText:"order-id",feedback:"please input an order id",required:!0,type:"number",minLength:1,maxLength:100},committeeId:{placeholder:"the id of the committee / counter asset",tooltip:"required: the unique identifier of the committee / counter asset",label:"committeeId",inputText:"commit-Id",feedback:"please input a committeeId id",required:!0,type:"number",minLength:1,maxLength:100},receiveAddress:{placeholder:"the address where the counter asset will be sent",tooltip:"required: the sender of the transaction",label:"receiveAddress",inputText:"rec-addr",feedback:"please choose an address to receive the counter asset to",required:!0,type:"text",minLength:40,maxLength:40},output:{placeholder:"output of the node",defaultValue:s,tooltip:"required: the non-custodial address where rewards and stake is directed to",label:"output",inputText:"output",feedback:"please choose an output address for the validator",required:!0,type:"text",minLength:40,maxLength:40},paramSpace:{placeholder:"",defaultValue:"",tooltip:"required: the category 'space' of the parameter",label:"param_space",inputText:"param space",feedback:"please choose a space for the parameter change",required:!0,type:"select",minLength:1,maxLength:100},paramKey:{placeholder:"",defaultValue:"",tooltip:"required: the identifier of the parameter",label:"param_key",inputText:"param key",feedback:"please choose a key for the parameter change",required:!0,type:"select",minLength:1,maxLength:100},paramValue:{placeholder:"",defaultValue:"",tooltip:"required: the newly proposed value of the parameter",label:"param_value",inputText:"param val",feedback:"please choose a value for the parameter change",required:!0,type:"text",minLength:1,maxLength:100},startBlock:{placeholder:"1",defaultValue:"",tooltip:"required: the block when voting starts",label:"start_block",inputText:"start blk",feedback:"please choose a height for start block",required:!0,type:"number",minLength:0,maxLength:40},endBlock:{placeholder:"100",defaultValue:"",tooltip:"required: the block when voting is counted",label:"end_block",inputText:"end blk",feedback:"please choose a height for end block",required:!0,type:"number",minLength:0,maxLength:40},memo:{placeholder:"opt: note attached with the transaction",defaultValue:"",tooltip:"an optional note attached to the transaction - blank is recommended",label:"memo",inputText:"memo",required:!1,minLength:0,maxLength:200},fee:{placeholder:"opt: transaction fee",defaultValue:"",tooltip:" a small amount of CNPY deducted from the account to process any transaction blank = default fee",label:"fee",inputText:"txn-fee",feedback:"please choose a valid number",required:!1,type:"number",minLength:0,maxLength:40},password:{placeholder:"key password",defaultValue:"",tooltip:"the password for the private key sending the transaction",label:"password",inputText:"password",feedback:"please choose a valid password",required:!0,type:"password",minLength:0,maxLength:40}};switch(e){case"send":return[l.address,l.rec,l.amount,l.memo,l.fee,l.password];case"stake":case"edit-stake":return[l.address,l.committees,l.netAddr,l.amount,l.output,l.memo,l.fee,l.password];case"create_order":return[l.address,l.committeeId,l.amount,l.receiveAmount,l.receiveAddress,l.memo,l.fee,l.password];case"edit_order":return[l.address,l.committeeId,l.orderId,l.amount,l.receiveAmount,l.receiveAddress,l.memo,l.fee,l.password];case"delete_order":return[l.address,l.committeeId,l.orderId,l.memo,l.fee,l.password];case"change-param":return[l.address,l.paramSpace,l.paramKey,l.paramValue,l.startBlock,l.endBlock,l.memo,l.fee,l.password];case"dao-transfer":return[l.address,l.amount,l.startBlock,l.endBlock,l.memo,l.fee,l.password];case"pass-and-addr":return[l.address,l.password];case"pass-and-pk":return[l.privateKey,l.password];case"pass-only":return[l.password];default:return[l.address,l.memo,l.fee,l.password]}}let m={poll:{"PLACEHOLDER EXAMPLE":{proposalHash:"PLACEHOLDER EXAMPLE",proposalURL:"https://discord.com/channels/1310733928436600912/1323330593701761204",accounts:{approvedPercent:38,rejectPercent:62,votedPercent:35},validators:{approvedPercent:76,rejectPercent:24,votedPercent:77}}},pollJSON:{proposal:"canopy network is the best",endBlock:100,URL:"https://discord.com/link-to-thread"},proposals:{"2cbb73b8abdacf233f4c9b081991f1692145624a95004f496a95d3cce4d492a4":{proposal:{parameter_space:"cons|fee|val|gov",parameter_key:"protocol_version",parameter_value:"example",start_height:1,end_height:1e6,signer:"4646464646464646464646464646464646464646464646464646464646464646"},approve:!1}},params:{parameter_space:"consensus",parameter_key:"protocol_version",parameter_value:"1/150",start_height:1,end_height:100,signer:"303739303732333263..."},rawTx:{type:"change_parameter",msg:{parameter_space:"cons",parameter_key:"block_size",parameter_value:1e3,start_height:1,end_height:100,signer:"1fe1e32edc41d688..."},signature:{public_key:"a88b9c0c7b77e7f8ac...",signature:"8f6d016d04e350..."},memo:"",fee:1e4}};function h(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e15;return null==e?"zero":(t&&(e/=1e6),Number(e)<n)?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):Intl.NumberFormat("en",{notation:"compact",maximumSignificantDigits:8}).format(e)}function x(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Copied!";navigator.clipboard.writeText(n),t({...e,toast:r})}function f(e,t){return(0,r.jsx)(l.Z,{id:"toast",position:"bottom-end",children:(0,r.jsx)(d.Z,{bg:"dark",onClose:()=>t({...e,toast:""}),show:""!=e.toast,delay:2e3,autohide:!0,children:(0,r.jsx)(d.Z.Body,{children:e.toast})})})}function y(e,t,n){t.preventDefault();let r={};for(let e=0;t.target[e]&&t.target[e].ariaLabel;e++)r[t.target[e].ariaLabel]=t.target[e].value;n(r)}function b(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"right";return(0,r.jsx)(c.Z,{placement:a,delay:{show:250,hide:400},overlay:(0,r.jsx)(u.Z,{id:"button-tooltip",children:t}),children:e},n)}function g(e){return!e||0===Object.keys(e).length}let v=[{icon:"./account.png",tip:"accounts"},{icon:"./gov.png",tip:"governance"},{icon:"./dashboard.png",tip:"monitor"}],j=[{url:"https://discord.gg/pNcSJj7Wdh",icon:"./discord-filled.png"},{url:"https://x.com/CNPYNetwork",icon:"./twitter.png"}];function k(e){let{keystore:t,setActiveKey:n,keyIdx:l,setNavIdx:d}=e;return(0,r.jsx)(s.Z,{sticky:"top","data-bs-theme":"light",id:"nav-bar",children:(0,r.jsxs)(a.Z,{id:"nav-bar-container",children:[(0,r.jsxs)(s.Z.Brand,{id:"nav-bar-brand",children:["my ",(0,r.jsx)("span",{id:"nav-bar-brand-highlight",children:"canopy "}),"wallet"]}),(0,r.jsx)("div",{id:"nav-dropdown-container",children:(0,r.jsx)(o.Z,{id:"nav-dropdown",title:(0,r.jsxs)(r.Fragment,{children:[Object.keys(t)[l],(0,r.jsx)("img",{alt:"key",id:"dropdown-image",src:"./key.png"})]}),children:Object.keys(t).map((e,t)=>(0,r.jsx)(o.Z.Item,{onClick:()=>n(t),className:"nav-dropdown-item",children:e},t))})}),(0,r.jsx)("div",{id:"nav-bar-select-container",children:(0,r.jsx)(i.Z,{id:"nav-bar-select",justify:!0,variant:"tabs",defaultActiveKey:"0",children:v.map((e,t)=>(0,r.jsx)(i.Z.Item,{onClick:()=>d(t),children:b((0,r.jsx)(i.Z.Link,{eventKey:t.toString(),children:(0,r.jsx)("img",{className:"navbar-image-link",src:e.icon,alt:e.tip})}),e.tip,t,"bottom")},t))})}),(0,r.jsx)("a",{href:j[0].url,children:(0,r.jsx)("div",{id:"nav-social-icon-discord",style:{backgroundImage:"url("+j[0].icon+")"},className:"nav-social-icon"})}),(0,r.jsx)("a",{href:j[1].url,children:(0,r.jsx)("div",{style:{backgroundImage:"url("+j[1].icon+")"},className:"nav-social-icon"})})]})})}let N="http://127.0.0.1:50002",w="http://127.0.0.1:50003",O="/v1/admin/log",S="/v1/admin/consensus-info?id=1",T="/v1/admin/peer-info";async function P(e,t){let n=await fetch(e+t,{method:"GET"}).catch(e=>{console.log(e)});return null==n?{}:n.json()}async function I(e,t){let n=await fetch(e+t,{method:"GET"}).catch(e=>{console.log(e)});return null==n?{}:n.text()}async function L(e,t,n){let r=await fetch(e+t,{method:"POST",body:n}).catch(e=>{console.log(e)});return null==r?{}:r.json()}function Z(e,t){return JSON.stringify({height:e,address:t})}function E(e,t){return JSON.stringify({pageNumber:e,address:t,perPage:5})}function _(e,t){return JSON.stringify({approve:t,proposal:e})}function A(e,t,n,r){return JSON.stringify({address:e,pollJSON:t,pollApprove:r,password:n,submit:!0})}function R(e,t){return JSON.stringify({address:e,password:t,submit:!0})}function C(e,t,n,r,a,s,o,i,l){return JSON.stringify({address:e,netAddress:n,committees:t,amount:r,output:a,memo:s,fee:o,submit:i,password:l})}function q(e,t,n,r,a,s,o,i,l,d){return JSON.stringify({address:e,committees:t.toString(),orderId:n,amount:r,receiveAmount:a,receiveAddress:s,memo:o,fee:i,submit:l,password:d})}function D(e,t,n,r,a,s,o,i,l,d,c){return JSON.stringify({address:e,amount:t,paramSpace:n,paramKey:r,paramValue:a,startBlock:s,endBlock:o,memo:i,fee:l,submit:d,password:c})}async function M(){return P(w,"/v1/admin/keystore")}async function V(e,t){return L(w,"/v1/admin/keystore-get",R(e,t))}async function K(e){return L(w,"/v1/admin/keystore-new-key",R("",e))}async function J(e,t){return L(w,"/v1/admin/keystore-import-raw",JSON.stringify({privateKey:e,password:t}))}async function B(){return I(w,O)}async function U(e,t){return L(N,"/v1/query/account",Z(e,t))}async function F(){return P(N,"/v1/gov/poll")}async function H(){return P(N,"/v1/gov/proposals")}async function z(e,t){return L(w,"/v1/gov/add-vote",_(JSON.parse(e),t))}async function G(e){return L(w,"/v1/gov/del-vote",_(JSON.parse(e)))}async function W(e,t,n){return L(w,"/v1/admin/tx-start-poll",A(e,JSON.parse(t),n))}async function Y(e,t,n,r){return L(w,"/v1/admin/tx-vote-poll",A(e,JSON.parse(t),r,n))}async function X(e,t,n){let r={};if(r.account=await U(e,t),r.sent_transactions=await L(N,"/v1/query/txs-by-sender",E(n,t)),r.rec_transactions=await L(N,"/v1/query/txs-by-rec",E(n,t)),r.combined=[],null!=r.sent_transactions.results&&null!=r.rec_transactions.results)r.combined=r.combined.concat(r.rec_transactions.results,r.sent_transactions.results);else if(null!=r.sent_transactions.results)r.combined=r.sent_transactions.results;else{if(null==r.rec_transactions.results)return r;r.combined=r.rec_transactions.results}return r.combined.sort(function(e,t){return t.height===e.height?t.index-e.index:t.height-e.height}),r}async function Q(e,t){return L(N,"/v1/query/validator",Z(e,t))}async function $(){return P(w,"/v1/admin/resource-usage")}async function ee(e,t,n,r,a,s,o){return L(w,"/v1/admin/tx-send",C(e,"","",n,t,r,Number(a),o,s))}async function et(e,t,n,r,a,s,o,i,l){return L(w,"/v1/admin/tx-stake",C(e,t,n,r,a,s,Number(o),l,i))}async function en(e,t,n,r,a,s,o,i,l){return L(w,"/v1/admin/tx-edit-stake",C(e,t,n,r,a,s,Number(o),l,i))}async function er(e,t,n,r,a){return L(w,"/v1/admin/tx-unstake",C(e,"","",0,"",t,Number(n),a,r))}async function ea(e,t,n,r,a){return L(w,"/v1/admin/tx-pause",C(e,"","",0,"",t,Number(n),a,r))}async function es(e,t,n,r,a){return L(w,"/v1/admin/tx-unpause",C(e,"","",0,"",t,Number(n),a,r))}async function eo(e,t,n,r,a,s,o,i,l,d){return L(w,"/v1/admin/tx-change-param",D(e,0,t,n,r,Number(a),Number(s),o,Number(i),d,l))}async function ei(e,t,n,r,a,s,o,i){return L(w,"/v1/admin/tx-dao-transfer",D(e,Number(t),"","","",Number(n),Number(r),a,Number(s),i,o))}async function el(e,t,n,r,a,s,o,i,l){return L(w,"/v1/admin/tx-create-order",q(e,t,0,Number(n),Number(r),a,s,Number(o),l,i))}async function ed(e,t,n,r,a,s,o,i,l,d){return L(w,"/v1/admin/tx-edit-order",q(e,t,Number(n),Number(r),Number(a),s,o,Number(i),d,l))}async function ec(e,t,n,r,a,s,o){return L(w,"/v1/admin/tx-delete-order",q(e,t,Number(n),0,0,"",r,Number(a),o,s))}async function eu(e){return L(N,"/v1/tx",e)}async function ep(e){return L(N,"/v1/query/params",Z(e,""))}async function em(){return P(w,S)}async function eh(){return P(w,T)}var ex=n(7294),ef=n(4373),ey=n(5377),eb=n(6529),eg=n(1417),ev=n(4283),ej=n(6374),ek=n(2448),eN=n(641),ew=n(5401),eO=n(4568),eS=n(8888);let eT=[{title:"SEND",name:"send",src:"arrow-up"},{title:"STAKE",name:"stake",src:"stake"},{title:"EDIT",name:"edit-stake",src:"edit-stake"},{title:"UNSTAKE",name:"unstake",src:"unstake"},{title:"PAUSE",name:"pause",src:"pause"},{title:"PLAY",name:"unpause",src:"unpause"},{title:"SWAP",name:"create_order",src:"swap"},{title:"REPRICE",name:"edit_order",src:"edit_order"},{title:"VOID",name:"delete_order",src:"delete_order"}];function eP(e){let{keygroup:t,account:n,validator:a}=e,[s,o]=(0,ex.useState)({showModal:!1,txType:"send",txResult:{},showSubmit:!0,showPKModal:!1,showNewModal:!1,pk:{},toast:"",showSpinner:!1}),i=n.account;function l(){o({...s,pk:{},txResult:{},showSubmit:!0,showModal:!1,showPKModal:!1,showNewModal:!1})}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"outline-secondary",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk-button";return(0,r.jsx)(eb.Z,{id:n,variant:t,type:"submit",children:e})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return(0,r.jsx)(eb.Z,{variant:"secondary",onClick:e,children:"Close"})}function u(e,t){return b((0,r.jsxs)("td",{onClick:()=>x(s,o,e),children:[(0,r.jsx)("img",{className:"account-summary-info-content-image",src:"./copy.png"}),(0,r.jsx)("div",{className:"account-summary-info-table-column",children:(0,r.jsx)(ey.Z,{text:e})})]}),e,t,"top")}function m(e,t,n,a,o,i,u,m){return(0,r.jsx)(ej.Z,{show:e,size:"lg",onHide:u,children:(0,r.jsxs)(ev.Z,{onSubmit:a,children:[(0,r.jsx)(ej.Z.Header,{children:(0,r.jsx)(ej.Z.Title,{children:t})}),(0,r.jsxs)(ej.Z.Body,{className:"modal-body",children:[p(n,o,i).map((e,t)=>(0,r.jsxs)(eg.Z,{className:"mb-3",size:"lg",children:[b((0,r.jsx)(eg.Z.Text,{className:"input-text",children:e.inputText}),e.tooltip,t,"auto"),(0,r.jsx)(ev.Z.Control,{placeholder:e.placeholder,required:e.required,defaultValue:e.defaultValue,min:0,type:e.type,minLength:e.minLength,maxLength:e.maxLength,"aria-label":e.label})]},t)),function(){let{pk:e,txResult:t}=s,n=g(e),a=g(t);return n&&a?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(ef.ZP,{value:n?{result:t}:{result:e},shortenTextAfterLength:100,displayDataTypes:!1})}(),(0,r.jsx)(ek.Z,{style:{display:s.showSpinner?"block":"none",margin:"0 auto"}})]}),(0,r.jsx)(ej.Z.Footer,{children:function(e){switch(e){case"import-or-generate":return d("Import or Generate Key");case"new-pk":return(0,r.jsxs)(r.Fragment,{children:[d("Generate New Key"),c(l)]});case"reveal-pk":return(0,r.jsxs)(r.Fragment,{children:[d("Get Private Key","outline-danger"),c(l)]});default:if(0===Object.keys(s.txResult).length)return(0,r.jsxs)(r.Fragment,{children:[d("Generate Transaction"),c()]});{let e=s.showSubmit?d("Submit Transaction","outline-danger"):(0,r.jsx)(r.Fragment,{});return(0,r.jsxs)(r.Fragment,{children:[e,c()]})}}}(m)})]})})}return t&&0!==Object.keys(t).length&&n.account?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"content-container",children:[(0,r.jsx)("span",{id:"balance",children:h(i.amount)}),(0,r.jsx)("span",{style:{fontWeight:"bold",color:"#32908f"},children:" CNPY"}),(0,r.jsx)("br",{}),(0,r.jsx)("hr",{style:{border:"1px dashed black",borderRadius:"5px",width:"60%",margin:"0 auto"}}),(0,r.jsx)("br",{}),m(s.showModal,s.txType,s.txType,function(e){y(s,e,e=>{let t=0!==Object.keys(s.txResult).length,n={send:()=>ee(e.sender,e.recipient,Number(e.amount),e.memo,e.fee,e.password,t),stake:()=>et(e.sender,e.committees,e.net_address,Number(e.amount),e.output,e.memo,e.fee,e.password,t),"edit-stake":()=>en(e.sender,e.committees,e.net_address,Number(e.amount),e.output,e.memo,e.fee,e.password,t),unstake:()=>er(e.sender,e.memo,e.fee,e.password,t),pause:()=>ea(e.sender,e.memo,e.fee,e.password,t),unpause:()=>es(e.sender,e.memo,e.fee,e.password,t),create_order:()=>el(e.sender,e.committeeId,Number(e.amount),Number(e.receiveAmount),e.receiveAddress,e.memo,e.fee,e.password,t),edit_order:()=>ed(e.sender,e.committeeId,Number(e.orderId),Number(e.amount),Number(e.receiveAmount),e.receiveAddress,e.memo,e.fee,e.password,t),delete_order:()=>ec(e.sender,e.committeeId,e.orderId,e.memo,e.fee,e.password,t)}[s.txType];n&&n().then(e=>{o({...s,showSubmit:!t,txResult:e})})})},i,a,l),eT.map(function(e,t){return(0,r.jsxs)("div",{className:"send-receive-button-container",children:[(0,r.jsx)("img",{className:"send-receive-button",onClick:()=>{var t;return t=e.name,void o({...s,showModal:!0,txType:t})},src:"./".concat(e.src,".png"),alt:e.title}),(0,r.jsx)("span",{style:{fontSize:"10px"},children:e.title})]},t)}),(0,r.jsx)(eS.Z,{className:"account-summary-container",children:[{title:"Account Type",info:0===Object.keys(a).length||a.address===a.output?"CUSTODIAL":"NON-CUSTODIAL"},{title:"Stake Amount",info:null==a.staked_amount?"0.00":h(a.staked_amount),after:" cnpy"},{title:"Staked Status",info:a.address?a.unstaking_time?"UNSTAKING":"STAKED":"UNSTAKED"}].map(function(e,t){return(0,r.jsx)(eN.Z,{children:(0,r.jsxs)(ew.Z,{className:"account-summary-container-card",children:[(0,r.jsx)(ew.Z.Header,{style:{fontWeight:"100"},children:e.title}),(0,r.jsx)(ew.Z.Body,{style:{padding:"10px"},children:(0,r.jsxs)(ew.Z.Title,{style:{fontWeight:"bold",fontSize:"14px"},children:[e.info,(0,r.jsx)("span",{style:{fontSize:"10px",color:"#32908f"},children:e.after})]})})]})},t)})}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),[{title:"Address",info:i.address},{title:"Public Key",info:t.publicKey}].map(function(e,t){return(0,r.jsxs)("div",{className:"account-summary-info",onClick:()=>x(s,o,e.info),children:[(0,r.jsx)("span",{className:"account-summary-info-title",children:e.title}),(0,r.jsxs)("div",{className:"account-summary-info-content-container",children:[(0,r.jsx)("div",{className:"account-summary-info-content",children:(0,r.jsx)(ey.Z,{text:e.info})}),(0,r.jsx)("img",{className:"account-summary-info-content-image",style:{top:"-20px"},src:"./copy.png"})]})]},t)}),(0,r.jsx)("br",{}),0===n.combined.length?null:(0,r.jsxs)("div",{className:"recent-transactions-table",children:[(0,r.jsx)("span",{style:{textAlign:"center",fontWeight:"100",fontSize:"14px",color:"grey"},children:"RECENT TRANSACTIONS"}),(0,r.jsxs)(eO.Z,{className:"table-fixed",bordered:!0,hover:!0,style:{marginTop:"10px"},children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:["Height","Amount","Recipient","Type","Hash"].map((e,t)=>(0,r.jsx)("th",{children:e},t))})}),(0,r.jsx)("tbody",{children:n.combined.slice(0,5).map((e,t)=>{var n,a,s;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.height}),(0,r.jsx)("td",{children:null!==(a=null!==(n=e.transaction.msg.amount)&&void 0!==n?n:e.transaction.msg.AmountForSale)&&void 0!==a?a:"N/A"}),u(null!==(s=e.recipient)&&void 0!==s?s:e.sender,t),(0,r.jsx)("td",{children:e.message_type}),u(e.tx_hash,t)]},t)})})]})]}),f(s,o),m(s.showPKModal,"Private Key","pass-and-addr",function(e){y(s,e,e=>V(e.sender,e.password).then(e=>{o({...s,showSubmit:0===Object.keys(s.txResult).length,pk:e})}))},i,null,l,"reveal-pk"),m(s.showNewModal,"Private Key","pass-only",function(e){y(s,e,e=>K(e.password).then(e=>{o({...s,showSubmit:0===Object.keys(s.txResult).length,pk:e})}))},null,null,l,"new-pk"),(0,r.jsx)(eb.Z,{id:"pk-button",variant:"outline-secondary",onClick:()=>o({...s,showNewModal:!0}),children:"New Private Key"}),(0,r.jsx)(eb.Z,{id:"reveal-pk-button",variant:"outline-danger",onClick:()=>o({...s,showPKModal:!0}),children:"Reveal Private Key"})]})}):m(!0,"UPLOAD PRIVATE OR CREATE KEY","pass-and-pk",function(e){y(s,e,e=>{e.private_key?J(e.private_key,e.password).then(e=>o({...s,showSpinner:!1})):K(e.password).then(e=>o({...s,showSpinner:!1}))})},null,null,null,"import-or-generate")}var eI=n(5152),eL=n.n(eI),eZ=n(7123),eE=n(6596),e_=n(6205),eA=n(9709),eR=n(6910),eC=n(3447);let eq=eL()(()=>n.e(391).then(n.t.bind(n,8391,23)).then(e=>e.LazyLog),{loadableGenerated:{webpack:()=>[8391]},ssr:!1});function eD(){let[e,t]=(0,ex.useState)({logs:"retrieving logs...",pauseLogs:!1,resource:[],consensusInfo:{},peerInfo:{}});function n(){let n=[em(),eh(),$()];e.pauseLogs||n.push(B()),Promise.all(n).then(e=>{let[n,r,a,s]=e;t(e=>{let t=e.resource.length>=30?[...e.resource.slice(1),a]:[...e.resource,a];return{...e,consensusInfo:n,peerInfo:r,resource:t,...e.pauseLogs?{}:{logs:s.toString()}}})})}if((0,ex.useEffect)(()=>{let e=setInterval(n,1e3);return()=>clearInterval(e)},[]),!e.consensusInfo.view||!e.peerInfo.id)return n(),(0,r.jsx)(ek.Z,{id:"spinner"});let s=Number(e.peerInfo.numInbound),o=Number(e.peerInfo.numOutbound),i=e.consensusInfo.view,l=function(e,t){let[n,r]=e>t?[e,t]:[t,e];for(let a=1;a<1e6;a++){let s=n/(r/a);if(.1>Math.abs(s-Math.round(s)))return e>t?"".concat(Math.round(s),":").concat(a):"".concat(a,":").concat(Math.round(s))}}(s=s||0,o=o||0),d=[{slides:[{title:e.consensusInfo.syncing?"SYNCING":"SYNCED",dT:"H: "+h(i.height,!1)+", R: "+i.round+", P: "+i.phase,d1:"PROP: "+(""===e.consensusInfo.proposer?"UNDECIDED":e.consensusInfo.proposer),d2:"BLK: "+(""===e.consensusInfo.blockHash?"WAITING":e.consensusInfo.blockHash),d3:e.consensusInfo.status},{title:"ROUND PROGRESS: "+({ELECTION:0,"ELECTION-VOTE":1,PROPOSE:2,"PROPOSE-VOTE":3,PRECOMMIT:4,"PRECOMMIT-VOTE":5,COMMIT:6,"COMMIT-PROCESS":7})[e.consensusInfo.view.phase]/8*100+"%",dT:"ADDRESS: "+e.consensusInfo.address,d1:"",d2:"",d3:""}],btnSlides:[{url:w+S,title:"QUORUM"},{url:w+"/v1/admin/config",title:"CONFIG"},{url:w+O,title:"LOGGER"}]},{slides:[{title:"TOTAL PEERS: "+(null==e.peerInfo.numPeers?"0":e.peerInfo.numPeers),dT:"INBOUND: "+s+", OUTBOUND: "+o,d1:"ID: "+e.peerInfo.id.public_key,d2:"NET ADDR: "+(e.peerInfo.id.net_address?e.peerInfo.id.net_address:"External Address Not Set"),d3:"I / O RATIO "+(l||"0:0")}],btnSlides:[{url:w+"/v1/admin/peer-book",title:"PEER BOOK"},{url:w+T,title:"PEER INFO"}]}];return(0,r.jsxs)("div",{className:"content-container",id:"dashboard-container",children:[(0,r.jsx)(a.Z,{id:"dashboard-inner",fluid:!0,children:(0,r.jsx)(eS.Z,{children:d.map((e,t)=>{var n;return(0,r.jsx)(eN.Z,{children:(0,r.jsxs)(eZ.Z,{slide:!1,interval:null,className:"carousel",children:[e.slides.map((e,t)=>(0,r.jsx)(eZ.Z.Item,{children:(0,r.jsx)(ew.Z,{className:"carousel-item-container",children:(0,r.jsxs)(ew.Z.Body,{children:[(0,r.jsx)(ew.Z.Title,{className:"carousel-item-title",children:(0,r.jsx)("span",{className:"text-white",children:e.title})}),(0,r.jsx)("p",{id:"carousel-item-detail-title",className:"carousel-item-detail",children:(0,r.jsx)(ey.Z,{text:e.dT})}),(0,r.jsx)("p",{className:"carousel-item-detail",children:(0,r.jsx)(ey.Z,{text:e.d1})}),(0,r.jsx)("p",{className:"carousel-item-detail",children:(0,r.jsx)(ey.Z,{text:e.d2})}),(0,r.jsx)("p",{children:e.d3})]})})},t)),(n=e.btnSlides,(0,r.jsx)(eZ.Z.Item,{children:(0,r.jsx)(ew.Z,{className:"carousel-item-container",children:(0,r.jsxs)(ew.Z.Body,{children:[(0,r.jsx)(ew.Z.Title,{children:"EXPLORE RAW JSON"}),(0,r.jsx)("div",{children:n.map((e,t)=>(0,r.jsx)(eb.Z,{className:"carousel-btn",variant:"outline-secondary",onClick:()=>window.open(e.url,"_blank"),children:e.title},t))})]})})}))]})},t)})})}),(0,r.jsx)("hr",{id:"dashboard-hr"}),(0,r.jsx)("div",{onClick:()=>t({...e,pauseLogs:!e.pauseLogs}),className:"logs-button-container",children:(0,r.jsx)("img",{className:"logs-button",alt:"play-pause-btn",src:e.pauseLogs?"./unpause_filled.png":"./pause_filled.png"})}),(0,r.jsx)(eq,{enableSearch:!0,id:"lazy-log",text:e.logs.replace("\n","")}),(0,r.jsx)(a.Z,{id:"charts-container",children:[[{yax:"PROCESS",n1:"CPU %",d1:"process.usedCPUPercent",n2:"RAM %",d2:"process.usedMemoryPercent"},{yax:"SYSTEM",n1:"CPU %",d1:"system.usedCPUPercent",n2:"RAM %",d2:"system.usedRAMPercent"}],[{yax:"DISK",n1:"Disk %",d1:"system.usedDiskPercent",n2:""},{yax:"IN OUT",removeTick:!0,n1:"Received",d1:"system.ReceivedBytesIO",n2:"Written",d2:"system.WrittenBytesIO"}],[{yax:"THREADS",n1:"Thread Count",d1:"process.threadCount",n2:""},{yax:"FILES",n1:"File Descriptors",d1:"process.fdCount",n2:""}]].map((t,n)=>(0,r.jsx)(eS.Z,{children:[void 0,void 0].map((n,a)=>{let s=""===t[a].n2?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(eE.u,{name:t[a].n2,type:"monotone",dataKey:t[a].d2,stroke:"#848484",fillOpacity:1,fill:"url(#cpu)"});return(0,r.jsx)(eN.Z,{children:(0,r.jsxs)(e_.T,{className:"area-chart",width:600,height:250,data:e.resource,margin:{top:40,right:40},children:[(0,r.jsx)(eA.B,{tick:!t[a].removeTick,tickCount:1,label:{value:t[a].yax,angle:-90}}),(0,r.jsx)(eE.u,{name:t[a].n1,type:"monotone",dataKey:t[a].d1,stroke:"#eeeeee",fillOpacity:1,fill:"url(#ram)"}),s,(0,r.jsx)(eR.u,{contentStyle:{backgroundColor:"#222222"}}),(0,r.jsx)(eC.D,{})]})})})},n))}),(0,r.jsx)("div",{style:{height:"50px",width:"100%"}})]})}var eM=n(6495),eV=n(3148),eK=n(2311);function eJ(e){let{account:t}=e,[n,s]=(0,ex.useState)({txResult:{},rawTx:{},showPropModal:!1,apiResults:{},paramSpace:"",voteOnPollAccord:"1",voteOnProposalAccord:"1",propAccord:"1",txPropType:0,toast:"",voteJSON:{},pwd:""});function o(){Promise.all([F(),H(),ep(0)]).then(e=>{s({...n,apiResults:{poll:e[0],proposals:e[1],params:e[2]}})})}if((0,ex.useEffect)(()=>()=>clearInterval(setInterval(()=>o(),4e3)),[]),g(n.apiResults))return o(),(0,r.jsx)(ek.Z,{id:"spinner"});function i(e,t){return z(e,t).then(e=>s({...n,voteOnProposalAccord:"1",toast:"Voted!"}))}function l(e,t,r,a){return Y(e,t,r,a).then(e=>s({...n,voteOnPollAccord:"1",toast:"Voted!"}))}function d(){s({...n,paramSpace:"",txResult:{},showPropModal:!1})}function c(e){s({...n,txPropType:e,showPropModal:!0,paramSpace:"",txResult:{}})}function u(e,t){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{className:"governance-header-image",alt:"vote",src:t}),(0,r.jsx)("span",{id:"propose-title",children:e}),(0,r.jsx)("span",{id:"propose-subtitle",children:"  on CANOPY"}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("hr",{className:"gov-header-hr"}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]})}function h(e,t,a,o,i){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:m.params,d=(e,t)=>s({...n,[e]:t,...e===a&&{voteJSON:t}});return(0,r.jsx)(eK.Z,{className:"accord",activeKey:n[t],onSelect:e=>d(t,e),children:(0,r.jsxs)(eK.Z.Item,{className:"accord-item",eventKey:"0",children:[(0,r.jsx)(eK.Z.Header,{children:e}),(0,r.jsxs)(eK.Z.Body,{children:[(0,r.jsx)(ev.Z.Control,{className:"accord-body-container",defaultValue:JSON.stringify(l,null,2),as:"textarea",onChange:e=>d(a,e.target.value)}),i&&(0,r.jsxs)(eg.Z,{className:"accord-pass-container",size:"lg",children:[(0,r.jsx)(eg.Z.Text,{children:"Password"}),(0,r.jsx)(ev.Z.Control,{type:"password",onChange:e=>d("pwd",e.target.value),required:!0})]}),o.map((e,t)=>(0,r.jsx)(eb.Z,{className:"propose-button",onClick:e.onClick,variant:"outline-dark",children:e.title},t))]})]})})}return g(n.apiResults.poll)?n.apiResults.poll=m.poll:n.apiResults.poll["PLACEHOLDER EXAMPLE"]=m.poll["PLACEHOLDER EXAMPLE"],g(n.apiResults.proposals)&&(n.apiResults.proposals=m.proposals),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"content-container",children:[u("poll","./poll.png"),(0,r.jsx)(eZ.Z,{className:"poll-carousel",interval:null,"data-bs-theme":"dark",children:Array.from(Object.entries(n.apiResults.poll)).map((e,t)=>{let[n,s]=e;return(0,r.jsxs)(eZ.Z.Item,{children:[(0,r.jsx)("h6",{className:"poll-prop-hash",children:s.proposalHash}),(0,r.jsx)("a",{href:s.proposalURL,className:"poll-prop-url",children:s.proposalURL}),(0,r.jsxs)(a.Z,{className:"poll-carousel-container",fluid:!0,children:[(0,r.jsx)(eM.$Q,{data:{labels:[s.accounts.votedPercent+"% Accounts Reporting",s.validators.votedPercent+"% Validators Reporting"],datasets:[{label:"% Voted YES",data:[s.accounts.approvedPercent,s.validators.approvedPercent],backgroundColor:"#7749c0"},{label:"% Voted NO",data:[s.accounts.rejectPercent,s.validators.rejectPercent],backgroundColor:"#000"}]},options:{responsive:!0,plugins:{tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0,max:100}}}}),(0,r.jsx)("br",{})]})]},t)})}),(0,r.jsx)("br",{}),h("START OR VOTE ON POLL","voteOnPollAccord","voteJSON",[{title:"START NEW",onClick:()=>W(t.account.address,n.voteJSON,n.pwd).then(e=>s({...n,voteOnPollAccord:"1",toast:"Started Poll!"}))},{title:"APPROVE",onClick:()=>l(t.account.address,n.voteJSON,!0,n.pwd)},{title:"REJECT",onClick:()=>l(t.account.address,n.voteJSON,!1,n.pwd)}],!0,m.pollJSON),u("propose","./proposal.png"),(0,r.jsxs)(eO.Z,{className:"vote-table",bordered:!0,responsive:!0,hover:!0,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"VOTE"}),(0,r.jsx)("th",{children:"PROPOSAL ID"}),(0,r.jsx)("th",{children:"ENDS"})]})}),(0,r.jsx)("tbody",{children:Array.from(Object.entries(n.apiResults.proposals).map((e,t)=>{let[n,a]=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:a.approve?"YES":"NO"}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"vote-table-col",children:(0,r.jsx)(ey.Z,{text:"#"+n})})}),(0,r.jsx)("td",{children:a.proposal.end_height})]},t)}))})]}),h("VOTE ON PROPOSAL","voteOnProposalAccord","voteJSON",[{title:"APPROVE",onClick:()=>i(n.voteJSON,!0)},{title:"REJECT",onClick:()=>i(n.voteJSON,!1)},{title:"DELETE",onClick:()=>G(n.voteJSON).then(e=>s({...n,voteOnProposalAccord:"1",toast:"Deleted!"}))}],!1),f(n,s),(0,r.jsx)("br",{}),h("SUBMIT PROPOSAL","propAccord","rawTx",[{title:"SUBMIT",onClick:()=>eu(n.rawTx).then(e=>{x(n,s,e,"tx hash copied to keyboard!")})}],!1,m.rawTx),(0,r.jsx)(eb.Z,{className:"propose-button",onClick:()=>c(0),variant:"outline-dark",children:"New Protocol Change"}),(0,r.jsx)(eb.Z,{className:"propose-button",onClick:()=>c(1),variant:"outline-dark",children:"New Treasury Subsidy"}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(ej.Z,{show:n.showPropModal,size:"lg",onHide:d,children:(0,r.jsxs)(ev.Z,{onSubmit:function(e){y(n,e,e=>{0===n.txPropType?function(e,t,r,a,o,i,l,d,c){eo(e,t,r,a,o,i,l,d,c,!1).then(e=>{s({...n,txResult:e})})}(e.sender,e.param_space,e.param_key,e.param_value,e.start_block,e.end_block,e.memo,e.fee,e.password):function(e,t,r,a,o,i,l){ei(e,t,r,a,o,i,l,!1).then(e=>{s({...n,txResult:e})})}(e.sender,e.amount,e.start_block,e.end_block,e.memo,e.fee,e.password)})},children:[(0,r.jsx)(ej.Z.Header,{closeButton:!0,children:(0,r.jsx)(ej.Z.Title,{children:0===n.txPropType?"Change Parameter":"Treasury Subsidy"})}),(0,r.jsxs)(ej.Z.Body,{style:{overflowWrap:"break-word"},children:[p(0===n.txPropType?"change-param":"dao-transfer",t.account).map((e,t)=>{let a=g(n.txResult)?"":"none";if("select"===e.type)switch(e.label){case"param_key":let o=[],i=n.apiResults.params[n.paramSpace];return i&&(o=Object.keys(i)),(0,r.jsx)(eg.Z,{style:{display:a},className:"mb-3",size:"lg",children:(0,r.jsxs)(ev.Z.Select,{size:"lg","aria-label":e.label,children:[(0,r.jsx)("option",{children:"param key"}),o.map((e,t)=>(0,r.jsx)("option",{value:e,children:e},t))]})},t);case"param_space":return(0,r.jsx)(eg.Z,{style:{display:a},className:"mb-3",size:"lg",children:(0,r.jsxs)(ev.Z.Select,{size:"lg",onChange:e=>s({...n,paramSpace:e.target.value}),"aria-label":e.label,children:[(0,r.jsx)("option",{children:"param space"}),(0,r.jsx)("option",{value:"Consensus",children:"consensus"}),(0,r.jsx)("option",{value:"Validator",children:"validator"}),(0,r.jsx)("option",{value:"Governance",children:"governance"}),(0,r.jsx)("option",{value:"Fee",children:"fee"})]})},t)}return(0,r.jsxs)(eg.Z,{style:{display:a},className:"mb-3",size:"lg",children:[b((0,r.jsx)(eg.Z.Text,{className:"param-input",children:e.inputText}),e.tooltip,t),(0,r.jsx)(ev.Z.Control,{placeholder:e.placeholder,required:e.required,defaultValue:e.defaultValue,type:e.type,min:0,minLength:e.minLength,maxLength:e.maxLength,"aria-label":e.label})]},t)}),g(n.txResult)?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(ef.ZP,{value:n.txResult,shortenTextAfterLength:100,displayDataTypes:!1})]}),(0,r.jsx)(ej.Z.Footer,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eb.Z,{style:{display:g(n.txResult)?"":"none"},id:"import-pk-button",variant:"outline-secondary",type:"submit",children:"Generate New Proposal"}),(0,r.jsx)(eb.Z,{variant:"secondary",onClick:d,children:"Close"})]})})]})})]})})}function eB(){let[e,t]=(0,ex.useState)({navIdx:0,keystore:null,keyIdx:0,account:{},validator:{}});function n(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.keyIdx;M().then(r=>{Promise.all([X(0,Object.keys(r)[n],0),Q(0,Object.keys(r)[n])]).then(a=>{t({...e,keyIdx:n,keystore:r,account:a[0],validator:a[1]})})})}return((0,ex.useEffect)(()=>{let e=setInterval(()=>{n()},4e3);return()=>clearInterval(e)}),null===e.keystore)?(n(),(0,r.jsx)(ek.Z,{id:"spinner"})):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{id:"container",children:[(0,r.jsx)(k,{...e,setActiveKey:n,setNavIdx:n=>t({...e,navIdx:n})}),(0,r.jsx)("div",{id:"pageContent",children:0===e.navIdx?(0,r.jsx)(eP,{keygroup:Object.values(e.keystore)[e.keyIdx],...e}):1===e.navIdx?(0,r.jsx)(eJ,{...e}):(0,r.jsx)(eD,{})})]})})}eV.kL.register(eV.ZL,eV.uw,eV.f$,eV.u,eV.De)}},function(e){e.O(0,[196,473,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);